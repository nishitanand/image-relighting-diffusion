â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                           â•‘
â•‘             INSTRUCTPIX2PIX TRAINING ON SDXL                              â•‘
â•‘                    Optimized for 8xA100 GPUs                              â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ WHAT THIS IS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Train SDXL (Stable Diffusion XL) for instruction-based image editing.

  Input:  Original Photo (1024Ã—1024) + "turn the sky into sunset"
  Output: Edited Photo with sunset sky

Using official HuggingFace Diffusers script (actively maintained)

â­ BETTER QUALITY than SD 1.5, but needs more compute!


ğŸ“Š KEY DIFFERENCES FROM SD 1.5
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Resolution:     1024Ã—1024  (vs 512Ã—512 in SD 1.5)
  Quality:        Excellent  (vs Good in SD 1.5)
  Training Time:  ~3-5 days  (vs ~1.5-2 days)
  VRAM per GPU:   ~60-70GB   (vs ~35-45GB)
  Batch Size:     4 per GPU  (vs 8 per GPU)


ğŸš€ QUICK START (3 STEPS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  PREPARE DATA (Same as SD 1.5!)

   # Reuse your SD 1.5 data if you already converted it:
   $ ln -s ../sd1_5/data_hf ./data_hf
   
   # Or convert new data:
   $ python convert_to_hf_dataset.py --data_dir /path/to/data --output_dir ./data_hf

2ï¸âƒ£  SETUP (First time only)

   $ pip install -r requirements.txt
   $ ./setup_accelerate.sh

3ï¸âƒ£  TRAIN!

   $ ./train.sh --data_dir ./data_hf


ğŸ“Š TRAINING SPECS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Hardware:        8 x A100 (80GB)
Training Time:   ~3-5 days for 50k samples
VRAM per GPU:    ~60-70 GB (more than SD 1.5!)
Resolution:      1024 Ã— 1024
Batch Size:      32 global (4 per GPU Ã— 8 GPUs Ã— 2 grad accum)
Parameters:      ~6.6B (vs ~1B for SD 1.5)


ğŸ¨ AFTER TRAINING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Run inference:

  $ python inference.py \
      --model_path ./output/instruct-pix2pix-sdxl \
      --input_image photo.jpg \
      --instruction "turn sky into sunset" \
      --output_path result.png


âš¡ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Out of Memory?
  â†’ ./train.sh --train_batch_size 3  (reduce from 4 to 3)

Too slow?
  â†’ SDXL is 3x larger than SD 1.5, so it's inherently slower
  â†’ Expected: ~3-5 days for 50k samples

Same data format?
  â†’ Yes! Use the exact same data as SD 1.5


ğŸ’¡ WHEN TO USE SDXL?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Use SDXL when:
  âœ… You need higher quality outputs
  âœ… Working with 1024Ã—1024 images
  âœ… Better text understanding is important
  âœ… You have compute budget (~3-5 days)

Stick with SD 1.5 when:
  âœ… Fast iteration is priority
  âœ… 512Ã—512 resolution is sufficient
  âœ… Limited compute budget
  âœ… Quick prototyping (~1.5-2 days)


ğŸ“š RECOMMENDATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Prototype with SD 1.5 first  (fast iteration)
2. Scale to SDXL for production  (better quality)


ğŸ“– FILES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â€¢ README.md                 Complete documentation
  â€¢ train.sh                  Launch training
  â€¢ inference.py              Run trained model
  â€¢ train_instruct_pix2pix_sdxl.py  Official HF script

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

           ğŸ‘‰  See README.md for full details  ğŸ‘ˆ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

